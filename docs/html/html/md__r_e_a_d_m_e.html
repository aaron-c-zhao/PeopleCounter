<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>People counter: PEOPLE COUNTER IP PIPELINE TESTING HARNESS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">People counter
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PEOPLE COUNTER IP PIPELINE TESTING HARNESS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This program was made to run and test the image processing pipeline of the people counter project.</p>
<h1>HOW TO INSTALL AND RUN THE HARNESS</h1>
<h2>SUPPORTED ENVIRONMENT</h2>
<ul>
<li>Mac Darwin</li>
<li>Linux</li>
</ul>
<h2>DEPENDENCIES</h2>
<ol type="1">
<li>CMake: &gt; 3.15</li>
<li>OpenCV</li>
</ol>
<ul>
<li>GCC 4.4.x or later</li>
<li>Git</li>
<li>GTK+2.x or higher</li>
<li>pkg-config</li>
<li>Python2.6 or later</li>
<li>ffmpeg or libav development packages: libavcodec-dev, libavformat-dev, libswscale-dev</li>
</ul>
<h2>INSTRUCTIONS</h2>
<h3>CONFIGURATION</h3>
<p>After clone this repository onto your local machine, first you need to configure the harness code and header file of the pipeline which could be accomplished by modify these two files:</p><ul>
<li>harness_config.json<ul>
<li>parameters: the parameters of the ip pipeline that will affect its affectiveness<ul>
<li>kernel_1: gaussian blur kernel 1, default value 5</li>
<li>kernel_2: gaussian blur kernel 2, default value 1</li>
<li>kernel_3: gaussian blur kernel 3, default value 1</li>
<li>threshold: the threshold applied when binarize the image, defaule value 32</li>
<li>blob_width_min: the minimum blob width used to filter out the noise, default value 0(ineffective)</li>
<li>blob_height_min: the minimum blob height used to filter out the noise, default value 0(ineffective)</li>
<li>updated_threshold: the threshold applied when threshold updating is triggered, default value 84</li>
<li>max_area: the maximum area of a blob that is allowed, used as a trigger of updating threshold to detect overly large blobs, default value 18</li>
</ul>
</li>
<li>harness_setup: configurations of the harness code, this won't affect the pipeline<ul>
<li>width: image width which will affect the image shown in the window</li>
<li>height: image height which will affect the image shown in the window</li>
<li>llimit: the lower limit applied when map the floating point temperature figure to 8bit grey value</li>
<li>hlimit: the upper limit applied when map the floating point temperature figure to 8bit grey value</li>
<li>frame_rate: the frame rate of the video, this combined with the FRAME_RATE seeting in header_config.txt will decide the step of the image pointer.</li>
</ul>
</li>
</ul>
</li>
<li>header_config.txt<ul>
<li>SENSOR_IMAGE_WIDTH: the width of the image to be processed by the pipeline, default value 32</li>
<li>SENSOR_IMAGE_HEIGHT: the height of the image to be processed by the pipeline, default valut 24</li>
<li>CT_MAX_DISAPPEARED: the maximum frames in which a blob is allowed to disappear, after that the BID(blob id) will be reallocated</li>
<li>CT_MAX_DISTANCE: the maximum distance that a blob is allowed to jump between frames</li>
<li>RECTS_MAX_SIZE: the maximum size that a blob is allowd to be regared as a single blob, values above that indicates that the blob consists of two or more small blobs that merging together</li>
<li>TRACKABLE_OBJECT_MAX_SIZE: the maximum number of blobs that the pipeline could trace</li>
<li>FRAME_RATE: the frame rate that the pipeline will work with.</li>
</ul>
</li>
</ul>
<h3>RUN THE PIPELINE LINE</h3>
<p>If you agree with the current configuration, then you can run the pipeline by following the instructions below:</p><ol type="1">
<li>change directory(cd) into the source folder of the project(PeopleCounter/)</li>
<li>run the script make.sh(./make.sh)</li>
<li>cd into the build/ folder.</li>
<li>run the executable(PeopleCounter) with the argument of the path of the json file(./PeopleCounter ../data/mlx90640/vertical/.....)</li>
</ol>
<h3>INTERACTION WITH THE HARNESS</h3>
<p>The harness will run the pipeline while displaying the images frame by frame. (TODO: add auto play) Press any key to go to the next frame. Press Ctrl+C to exit.</p>
<h3>OUTPUT OF THE HARNESS</h3>
<p>The harness will output the frame number of the current frame and the result produced by the pipeline. (TODO: add intermedia result inspection) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
